/*! Dependency Sorter v0.1.0 | (c) Michael Spencer | MIT License */
"use strict";!function(e,n,r,t){var i;"function"==typeof define&&define.amd?define(r,[],t):"object"==typeof module&&module.exports?module.exports=t():(i=e[n],e[n]=t(),e[n].noConflict=function(){var r=e[n];return e[n]=i,r})}(this,"DependencySorter","dependency-sorter",function(){function e(e){function i(e){function n(){e=e.map(u.serialize)}function i(){e=e.map(u.deserialize)}function o(){e=r(e)}function f(){t(e)}return n(),o(),f(),i(),e}var u=new n(e);return{sort:i,util:{serialize:function(e){return u.serialize(e)},deserialize:function(e){return u.deserialize(e)},Serializer:n,sortByDepends:r,sortByWeight:t}}}function n(e){function n(e){var n=e[i],r=e[u],f=e[o];return{id:"undefined"!=typeof n&&null!=n?n:e,weight:"number"==typeof r?r:t,depends:f?Array.isArray(f)?f:[f]:[],mark:void 0,node:e}}function r(e){return e.node}var t=e&&"number"==typeof e.defaultWeight?e.defaultWeight:0,i=e&&e.idProperty||"id",u=e&&e.weightProperty||"weight",o=e&&e.dependsProperty||"depends";return{serialize:n,deserialize:r}}function r(e){function n(u){switch(u.mark){case r:throw new Error("Circular dependency encountered: "+u.id);case t:break;default:u.mark=r,e.forEach(function(e){~e.depends.indexOf(u.id)&&n(e)}),u.mark=t,i.unshift(u)}}var r=1,t=2,i=[];return e.forEach(function(e){e.mark||n(e)}),i}function t(e){var n=e;return i(n,1,n.length,function(e,n,r){if(e.weight<0){var t;t=u(r,n,0,function(e,n){return!~e.depends.indexOf(n.id)}),t=u(r,t,n,function(e,n){return e.weight>n.weight})}}),i(n,n.length-2,0,function(e,n,r){if(e.weight>0){var t;t=u(r,n,r.length-1,function(e,n){return!~n.depends.indexOf(e.id)}),t=u(r,t,n,function(e,n){return e.weight<n.weight})}}),n}function i(e,n,r,t,i){if(n!==r){for(var u=r>n?1:-1,o=n;o!==r;o+=u){var f=t(e[o],o,e,n,r,t,i);if("undefined"!=typeof f)return f}return i}}function u(e,n,r,t){if(n!==r){var u=r>n?1:-1;return i(e,n,r,function(e,n,i){var o=n+u,f=i[o];return t(e,f)?(i[o]=e,i[n]=f,o===r?o:void 0):n},n)}}return e.util={Serializer:n,sortByDepends:r,sortByWeight:t},e});